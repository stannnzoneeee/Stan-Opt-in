<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Opt-in Page Task - Caezar Stanly Tomas</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            padding: 50px 40px;
            border-radius: 15px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            text-align: center;
        }

        .badge {
            display: inline-block;
            background: #f0f0f0;
            color: #667eea;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        h1 {
            font-size: 2.2rem;
            margin-bottom: 15px;
            color: #1a1a1a;
            font-weight: 700;
        }

        .subtitle {
            font-size: 1.1rem;
            color: #667eea;
            font-weight: 600;
            margin-bottom: 25px;
        }

        p {
            font-size: 1rem;
            line-height: 1.6;
            color: #555;
            margin-bottom: 30px;
        }

        .divider {
            width: 60px;
            height: 3px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 30px auto;
            border-radius: 2px;
        }

        .cta-section h2 {
            font-size: 1.5rem;
            color: #333;
            margin-bottom: 15px;
        }

        .cta-section p {
            margin-bottom: 25px;
            color: #666;
        }

        .cta-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 16px 45px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
        }

        .cta-button:active {
            transform: translateY(-1px);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
        }

        .modal.active {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 15px;
            max-width: 450px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            position: relative;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .close {
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 28px;
            font-weight: bold;
            color: #aaa;
            cursor: pointer;
            transition: color 0.3s;
            line-height: 1;
        }

        .close:hover {
            color: #333;
        }

        .modal-content h2 {
            margin-bottom: 10px;
            color: #333;
            font-size: 1.8rem;
            font-weight: 700;
        }

        .modal-subtitle {
            color: #667eea;
            font-size: 0.95rem;
            margin-bottom: 25px;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 0.95rem;
        }

        .form-group input {
            width: 100%;
            padding: 13px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s;
            font-family: inherit;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .submit-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .submit-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .submit-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .success-message {
            display: none;
            text-align: center;
            padding: 30px 20px;
        }

        .success-message.active {
            display: block;
        }

        .success-icon {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 35px;
            color: white;
        }

        .success-message h2 {
            color: #11998e;
            margin-bottom: 15px;
            font-size: 1.8rem;
        }

        .success-message p {
            color: #555;
            font-size: 1rem;
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .container {
                padding: 40px 30px;
            }

            h1 {
                font-size: 1.8rem;
            }

            .modal-content {
                padding: 35px 25px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="badge">Tech VA Application Task</div>

        <h1>Hi, I'm Caezar Stanly Tomas</h1>
        <p class="subtitle">Applying for Tech Virtual Assistant Role</p>

        <p>This is my opt-in page creation task. I've built this page to demonstrate my ability to create functional landing pages with email collection functionality. This page uses n8n webhook automation to send confirmation emails to subscribers.</p>

        <div class="divider"></div>

        <div class="cta-section">
            <h2>Try the Opt-in Form</h2>
            <p>Click the button below to see the email collection feature in action!</p>
            <button class="cta-button" id="openModalBtn">Submit</button>
        </div>
    </div>

    <!-- Modal -->
    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>

            <!-- Form -->
            <div id="formContainer">
                <h2>Submit</h2>
                <p class="modal-subtitle">Enter your details below</p>
                <form id="optinForm">
                    <div class="form-group">
                        <label for="name">Your Name</label>
                        <input type="text" id="name" name="name" required placeholder="John Doe">
                    </div>

                    <div class="form-group">
                        <label for="email">Your Email</label>
                        <input type="email" id="email" name="email" required placeholder="john@example.com">
                    </div>

                    <button type="submit" class="submit-button" id="submitBtn">Submit</button>
                </form>
            </div>

            <!-- Success Message -->
            <div id="successMessage" class="success-message">
                <div class="success-icon">âœ“</div>
                <h2>Check Your Email!</h2>
                <p>Thank you! We've sent a confirmation email to your inbox. Please check your email (and spam folder just in case).</p>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        // n8n Webhook URL
        const WEBHOOK_URL = 'https://stanzzone.app.n8n.cloud/webhook/5b688360-2ad6-42df-b936-c11ebc661706';

        // Modal functionality
        const modal = document.getElementById('myModal');
        const btn = document.getElementById('openModalBtn');
        const span = document.getElementsByClassName('close')[0];
        const form = document.getElementById('optinForm');
        const formContainer = document.getElementById('formContainer');
        const successMessage = document.getElementById('successMessage');
        const submitBtn = document.getElementById('submitBtn');

        btn.onclick = function() {
            modal.classList.add('active');
        }

        span.onclick = function() {
            modal.classList.remove('active');
            // Reset form when closing
            setTimeout(() => {
                formContainer.style.display = 'block';
                successMessage.classList.remove('active');
                form.reset();
            }, 300);
        }

        window.onclick = function(event) {
            if (event.target == modal) {
                modal.classList.remove('active');
                setTimeout(() => {
                    formContainer.style.display = 'block';
                    successMessage.classList.remove('active');
                    form.reset();
                }, 300);
            }
        }

        // Form submission
        form.addEventListener('submit', function(e) {
            e.preventDefault();

            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;

            // Disable submit button
            submitBtn.disabled = true;
            submitBtn.textContent = 'Sending...';

            // Data to send to n8n webhook - only name and email
            const data = {
                name: name,
                email: email
            };

            console.log('Sending data to webhook:', data);

            // Send data to n8n webhook
            fetch(WEBHOOK_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(response => {
                console.log('Response status:', response.status);
                console.log('Response headers:', response.headers);

                // Accept any 2xx status code as success
                if (response.status >= 200 && response.status < 300) {
                    return response.text().then(text => {
                        console.log('Response text:', text);
                        try {
                            return text ? JSON.parse(text) : {};
                        } catch (e) {
                            return { success: true };
                        }
                    });
                } else {
                    return response.text().then(text => {
                        throw new Error('Webhook request failed with status ' + response.status + ': ' + text);
                    });
                }
            })
            .then(data => {
                console.log('SUCCESS!', data);

                // Hide form and show success message
                formContainer.style.display = 'none';
                successMessage.classList.add('active');

                // Re-enable button
                submitBtn.disabled = false;
                submitBtn.textContent = 'Submit';
            })
            .catch(error => {
                console.error('FAILED...', error);

                // Show error message
                alert('Oops! Something went wrong.\n\n' +
                      'Error: ' + error.message + '\n\n' +
                      'Please check:\n' +
                      '1. Your n8n webhook is in "Listen for Test Event" mode\n' +
                      '2. Your n8n workflow is activated (toggle at top)\n' +
                      '3. CORS is enabled in n8n webhook settings\n\n' +
                      'Press F12 to see console for more details.');

                // Re-enable button
                submitBtn.disabled = false;
                submitBtn.textContent = 'Submit';
            });
        });
    </script>
</body>
</html>
